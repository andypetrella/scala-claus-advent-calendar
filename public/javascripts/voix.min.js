!function(a){"use strict";function c(a){this._lang=a,this.initialize()}var b=a.webkitSpeechRecognition;c.prototype.initialize=function(){return this._collection={},this._createRecognition(),this._bindKeyEvents(),this},c.prototype._createRecognition=function(){return this._recognition=new b,this._recognition.continuous=!0,this._recognition.interimResults=!1,this._recognition.lang=this._lang||"en-US",this._recognition.maxAlternatives=1,this._recognition.onresult=void 0,this._recognition.start(),this},c.prototype._bindKeyEvents=function(){var a=this,b=!1;return document.addEventListener("keydown",function(c){b||86!==c.keyCode||(a.start(),b=!0)}),document.addEventListener("keyup",function(a){b&&86===a.keyCode&&(b=!1)}),this},c.prototype._result=function(a){this.stop();var f,g,h,b=this,c=a.resultIndex,d=a.results.length,e=0;for(c;d>c;c+=1)if(a.results[c].isFinal&&(h=a.results[c][0].transcript.replace(/^\s+|\s+$/g,"").toLowerCase(),b._collection[h]))for(f=b._collection[h].listeners,g=f.length,e;g>e;e+=1)f[e].call()},c.prototype.setCommand=function(a,b){return void 0===this._collection[a]&&(this._collection[a]={listeners:[]}),this._collection[a].listeners.push(b),this},c.prototype.removeCommand=function(a,b){var c=this._collection[a].listeners,d=0,e=c.length;if(void 0!==e)for(d;e>d;d+=1)if(c[d]===b){c.splice(d,1);break}return(0===c.length||void 0===b)&&delete this._collection[a],this},c.prototype.start=function(){var a=this;return this._recognition.onresult=function(b){a._result.call(a,b)},this},c.prototype.stop=function(){return this._recognition.onresult=void 0,this},"function"==typeof a.define&&void 0!==a.define.amd?a.define("Voix",[],function(){return c}):"undefined"!=typeof module&&void 0!==module.exports?module.exports=c:a.Voix=c}(this);